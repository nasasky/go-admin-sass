2025/07/01 22:50:41 Redis client not initialized, attempting with default configuration
2025/07/01 22:50:41 Initializing Redis client with address: localhost:6379, DB: 0
2025/07/01 22:50:41 Successfully connected to Redis at localhost:6379, DB: 0
2025/07/01 22:50:41 ✅ 全局安全订单创建器已初始化
2025/07/01 22:50:41 ✅ 全局统一订单管理器已初始化
2025/07/01 22:50:41 ✅ 订单控制器已使用统一订单管理器初始化
2025/07/01 22:50:41 启动 nasa-go-admin (模式: all)...
2025/07/01 22:50:41 配置系统已统一，使用新的配置管理
2025/07/01 22:50:41 数据库连接池配置 - MaxOpen: 100, MaxIdle: 20, MaxLifetime: 1h0m0s
2025/07/01 22:50:41 数据库连接池已优化: MaxOpen=100, MaxIdle=20, MaxLifetime=1h0m0s
2025/07/01 22:50:41 MongoDB连接已初始化，共 8 个数据库
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.push_records.message_id_unique 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.push_records.push_time_desc 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.push_records.message_type_idx 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.push_records.target_idx 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.push_records.success_idx 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.push_records.sender_id_idx 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.push_records.status_idx 成功
2025/07/01 22:50:41 📊 集合 notification_log_db.push_records: 成功处理 7/7 个索引
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.notification_logs.message_id_idx 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.notification_logs.timestamp_desc 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.notification_logs.event_type_idx 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.notification_logs.user_id_idx 成功
2025/07/01 22:50:41 📊 集合 notification_log_db.notification_logs: 成功处理 4/4 个索引
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.admin_user_receive_records.message_id_idx 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.admin_user_receive_records.user_id_idx 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.admin_user_receive_records.created_at_desc 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.admin_user_receive_records.message_user_unique 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.admin_user_receive_records.is_received_idx 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.admin_user_receive_records.is_read_idx 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.admin_user_receive_records.is_confirmed_idx 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.admin_user_receive_records.delivery_status_idx 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.admin_user_receive_records.push_channel_idx 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.admin_user_receive_records.username_idx 成功
2025/07/01 22:50:41 📊 集合 notification_log_db.admin_user_receive_records: 成功处理 10/10 个索引
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.admin_user_online_status.user_id_unique 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.admin_user_online_status.is_online_idx 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.admin_user_online_status.last_seen_desc 成功
2025/07/01 22:50:41 ✅ 创建索引 notification_log_db.admin_user_online_status.username_idx 成功
2025/07/01 22:50:41 📊 集合 notification_log_db.admin_user_online_status: 成功处理 4/4 个索引
2025/07/01 22:50:41 ✅ MongoDB集合和索引自动初始化成功
2025/07/01 22:50:41 🔐 初始化订单安全系统...
2025/07/01 22:50:41 🚀 开始初始化订单安全系统...
2025/07/01 22:50:41 初始化安全订单创建器...
2025/07/01 22:50:41 ✅ 全局安全订单创建器已初始化
2025/07/01 22:50:41 ✅ 订单诊断工具已初始化
2025/07/01 22:50:41 ✅ 安全订单创建器初始化完成
2025/07/01 22:50:41 初始化订单监控服务...
2025/07/01 22:50:41 ✅ 全局订单监控服务已启动
2025/07/01 22:50:41 ✅ 订单监控服务初始化完成
2025/07/01 22:50:41 初始化订单补偿服务...
2025/07/01 22:50:41 ✅ 订单补偿服务初始化完成
2025/07/01 22:50:41 启动订单系统后台任务...
2025/07/01 22:50:41 ✅ 后台任务启动完成
2025/07/01 22:50:41 ✅ 订单安全系统初始化完成
2025/07/01 22:50:41 ✅ 订单安全系统初始化成功
2025/07/01 22:50:41 📅 启动订单状态自动管理调度器...
2025/07/01 22:50:41 🔍 启动订单监控服务...
2025/07/01 22:50:41 🔍 过期订单检查器已启动
2025/07/01 22:50:41 🔍 数据一致性检查器已启动
2025/07/01 22:50:41 订单状态自动管理调度器已启动
2025/07/01 22:50:41 🔍 Redis超时队列处理器已启动
2025/07/01 22:50:41 已启动 40 个WebSocket消息发送工作线程
2025/07/01 22:50:41 WebSocket Hub已初始化并启动
2025/07/01 22:50:41 WebSocket工作线程 #29 已启动
2025/07/01 22:50:41 WebSocket工作线程 #23 已启动
2025/07/01 22:50:41 WebSocket工作线程 #34 已启动
2025/07/01 22:50:41 WebSocket工作线程 #18 已启动
2025/07/01 22:50:41 WebSocket工作线程 #19 已启动
2025/07/01 22:50:41 WebSocket工作线程 #20 已启动
2025/07/01 22:50:41 WebSocket工作线程 #21 已启动
2025/07/01 22:50:41 WebSocket工作线程 #22 已启动
2025/07/01 22:50:41 WebSocket工作线程 #13 已启动
2025/07/01 22:50:41 WebSocket工作线程 #9 已启动
2025/07/01 22:50:41 WebSocket工作线程 #10 已启动
2025/07/01 22:50:41 WebSocket工作线程 #11 已启动
2025/07/01 22:50:41 WebSocket工作线程 #12 已启动
2025/07/01 22:50:41 WebSocket工作线程 #27 已启动
2025/07/01 22:50:41 WebSocket工作线程 #38 已启动
2025/07/01 22:50:41 WebSocket工作线程 #28 已启动
2025/07/01 22:50:41 WebSocket工作线程 #37 已启动
2025/07/01 22:50:41 WebSocket工作线程 #36 已启动
2025/07/01 22:50:41 WebSocket工作线程 #35 已启动
2025/07/01 22:50:41 WebSocket工作线程 #15 已启动
2025/07/01 22:50:41 WebSocket工作线程 #24 已启动
2025/07/01 22:50:41 WebSocket工作线程 #14 已启动
2025/07/01 22:50:41 WebSocket工作线程 #30 已启动
2025/07/01 22:50:41 WebSocket工作线程 #16 已启动
2025/07/01 22:50:41 WebSocket工作线程 #17 已启动
2025/07/01 22:50:41 WebSocket工作线程 #31 已启动
2025/07/01 22:50:41 WebSocket工作线程 #3 已启动
2025/07/01 22:50:41 WebSocket工作线程 #32 已启动
2025/07/01 22:50:41 WebSocket工作线程 #0 已启动
2025/07/01 22:50:41 WebSocket工作线程 #1 已启动
2025/07/01 22:50:41 WebSocket工作线程 #26 已启动
2025/07/01 22:50:41 WebSocket工作线程 #25 已启动
2025/07/01 22:50:41 WebSocket工作线程 #2 已启动
2025/07/01 22:50:41 WebSocket工作线程 #5 已启动
2025/07/01 22:50:41 WebSocket工作线程 #4 已启动
2025/07/01 22:50:41 WebSocket工作线程 #33 已启动
2025/07/01 22:50:41 WebSocket工作线程 #6 已启动
2025/07/01 22:50:41 WebSocket工作线程 #7 已启动
2025/07/01 22:50:41 WebSocket工作线程 #39 已启动
2025/07/01 22:50:41 WebSocket工作线程 #8 已启动
2025/07/01 22:50:41 初始化所有路由...
2025/07/01 22:50:41 🚀 开始初始化订单安全系统...
2025/07/01 22:50:41 初始化安全订单创建器...
2025/07/01 22:50:41 ✅ 全局安全订单创建器已初始化
2025/07/01 22:50:41 ✅ 订单诊断工具已初始化
2025/07/01 22:50:41 ✅ 安全订单创建器初始化完成
2025/07/01 22:50:41 初始化订单监控服务...
2025/07/01 22:50:41 ✅ 全局订单监控服务已启动
2025/07/01 22:50:41 ✅ 订单监控服务初始化完成
2025/07/01 22:50:41 初始化订单补偿服务...
2025/07/01 22:50:41 ✅ 订单补偿服务初始化完成
2025/07/01 22:50:41 启动订单系统后台任务...
2025/07/01 22:50:41 🔍 启动订单监控服务...
2025/07/01 22:50:41 ✅ 后台任务启动完成
2025/07/01 22:50:41 🔍 Redis超时队列处理器已启动
2025/07/01 22:50:41 ✅ 订单安全系统初始化完成
2025/07/01 22:50:41 🔍 过期订单检查器已启动
2025/07/01 22:50:41 🔍 数据一致性检查器已启动
2025/07/01 22:50:41 服务器启动在端口 :8801
2025/07/01 22:50:41 服务启动失败: listen tcp :8801: bind: address already in use
